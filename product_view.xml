<?xml version="1.0"?>
<openerp>
    <data>

        <!-- Add external_id, label tab, and cost tab to product.product -->
        <record id="product_normal_form_view_xml_id" model="ir.ui.view">
            <field name="name">view.product.product.form.xml_id</field>
            <field name="model">product.product</field>
            <field name="inherit_id" ref="stock.view_normal_procurement_locations_form"/>
            <field eval="7" name="priority"/>
            <field name="arch" type="xml">
                <xpath expr="//div[@name='buttons']" position="inside">
                    <button name="button_fis_refresh" string="FIS Refresh" type="object"/>
                </xpath>
                <page string="Information" position="after">
                    <page string="Shipping Instructions">
                        <field name="spcl_ship_instr" nolabel="1" placeholder="Special shipping instructions here..."/>
                    </page>
                </page>
                <page string="Sales" position="after">
                    <page string="Labels">
                        <field name="label_server_stub" nolabel="1"/>
                    </page>
                    <page string="Costs" groups="fis_integration.purchase_cost">
                        <field name="cost_server_stub"/>
                    </page>
                </page>
                <field name="loc_rack" position="replace"/>
                <field name="loc_row" position="replace"/>
                <field name="loc_case" position="replace">
                    <field name="fis_location"/>
                </field>
                <field name="list_price" position="after">
                    <field name="shipped_as"/>
                </field>
                <field name="default_code" position="replace">
                    <field name="xml_id"/>
                </field>
            </field>
        </record>

        <record id="product_product_tree_view_xml_id" model="ir.ui.view">
            <field name="name">fis_integration.product.tree</field>
            <field name="model">product.product</field>
            <field name="inherit_id" ref="product.product_product_tree_view"/>
            <field name="arch" type="xml">
                <field name="default_code" position="replace">
                    <field name="xml_id"/>
                </field>
            </field>
        </record>

        <record id="product_normal_action" model="ir.actions.act_window">
            <field name="name">Products</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">product.product</field>
            <field name="domain">['|',('product_tmpl_id.product_manager','=',uid),('product_tmpl_id.product_manager','=',False)]</field>
        </record>

        <record id="product_normal_action_sell" model="ir.actions.act_window">
            <field name="name">Products</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">product.product</field>
            <field name="domain">['|',('product_tmpl_id.product_manager','=',uid),('product_tmpl_id.product_manager','=',False)]</field>
        </record>

        <!--

            <field name="view_type">form</field>
            <field name="view_mode">tree,form,kanban</field>
            <field name="view_id" ref="product_product_tree_view"/>
            <field name="search_view_id" ref="product_search_form_view"/>

            <field name="help" type="html">
              <p class="oe_view_nocontent_create">
                Click to define a new product.
              </p><p>
                You must define a product for everything you buy or sell,
                whether it's a physical product, a consumable or service.
              </p>
            </field>
        -->
        <record id="product_category_list_view_xml_id" model="ir.ui.view">
            <field name="name">product.category.list.xml_id</field>
            <field name="model">product.category</field>
            <field name="inherit_id" ref="product.product_category_list_view"/>
            <field name="arch" type="xml">
                <field name="complete_name" position="after">
                    <field name='xml_id'/>
                </field>
            </field>
        </record>

        <record id="product_category_form_view_xml_id" model="ir.ui.view">
            <field name="name">product.category.form.xml_id</field>
            <field name="model">product.category</field>
            <field name="inherit_id" ref="product.product_category_form_view"/>
            <field name="arch" type="xml">
                <field name="parent_id" position="before">
                    <group colspan="4">
                        <field name='xml_id'/>
                    </group>
                </field>
            </field>
        </record>

        <!-- Add product available at entries -->
        <record model="ir.ui.view" id="product_available_at_form">
            <field name="name">Product Locations</field>
            <field name="model">product.available_at</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Locations">
                    <field name="xml_id" attrs="{'readonly':True}"/>
                    <field name="name" colspan="4"/>
                    <notebook colspan="4">
                        <page string="Products at this location">
                            <field name="product_ids" nolabel="1">
                                <tree>
                                    <field name="name"/>
                                </tree>
                            </field>
                        </page>
                        <page string="Notes (TBI)"/>
                    </notebook>
                </form>
            </field>
        </record>


        <record model="ir.ui.view" id="product_available_at_tree">
            <field name="name">Product Locations</field>
            <field name="model">product.available_at</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Locations">
                    <field name="name"/>
                    <field name="xml_id" attrs="{'readonly':True}"/>
                </tree>
            </field>
        </record>


        <record model="ir.actions.act_window" id="product_available_at_action">
            <field name="name">Product Locations</field>
            <field name="res_model">product.available_at</field>
            <field name="view_type">form</field>
            <field name="view_id" ref="product_available_at_tree"/>
            <field name="view_mode">tree,form</field>
        </record>

        <menuitem name="Locations" id="product.available_at" parent="product.prod_config_main" action="product_available_at_action" groups="base.group_user"/>

        <record model="ir.ui.view" id="production_line_tree">
            <field name="name">Production Lines</field>
            <field name="model">fis_integration.production_line</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Production Lines" create="false">
                    <field name="name"/>
                </tree>
            </field>
        </record>

        <record model="ir.actions.act_window" id="production_line_tree_action">
            <field name="name">Production Lines</field>
            <field name="res_model">fis_integration.production_line</field>
            <field name="view_type">tree</field>
            <field name="view_id" ref="production_line_tree"/>
            <field name="view_mode">tree</field>
        </record>

    </data>

    <data noupdate="1">
        <record model="ir.cron" id="product_location_update">
            <field name="name">Product Locations Update</field>
            <field name="interval_number">1</field>
            <field name="interval_type">days</field>
            <field name="numbercall">-1</field>
            <field name="doall" eval="False"/>
            <field name="model" eval="'product.available_at'"/>
            <field name="function" eval="'fis_updates'"/>
            <field name="args" eval="'()'"/>
            <field name="nextcall" eval="'2013-04-09 08:00:00'"/>
            <field name="priority">100</field>
        </record>

        <record model="ir.cron" id="product_category_update">
            <field name="name">Product Categories Update</field>
            <field name="interval_number">1</field>
            <field name="interval_type">days</field>
            <field name="numbercall">-1</field>
            <field name="doall" eval="False"/>
            <field name="model" eval="'product.category'"/>
            <field name="function" eval="'fis_updates'"/>
            <field name="args" eval="'()'"/>
            <field name="nextcall" eval="'2013-04-09 08:00:00'"/>
            <field name="priority">100</field>
        </record>

        <record model="ir.cron" id="product_inventory_update">
            <field name="name">Product Inventory Update</field>
            <field name="interval_number">1</field>
            <field name="interval_type">days</field>
            <field name="numbercall">-1</field>
            <field name="doall" eval="False"/>
            <field name="model" eval="'product.product'"/>
            <field name="function" eval="'fis_updates'"/>
            <field name="args" eval="'()'"/>
            <field name="nextcall" eval="'2013-04-09 08:00:00'"/>
            <field name="priority">200</field>
        </record>

        <record model="ir.cron" id="production_line_update">
            <field name="name">Production Line Update</field>
            <field name="interval_number">1</field>
            <field name="interval_type">days</field>
            <field name="numbercall">-1</field>
            <field name="doall" eval="False"/>
            <field name="model" eval="'fis_integration.production_line'"/>
            <field name="function" eval="'fis_updates'"/>
            <field name="args" eval="'()'"/>
            <field name="nextcall" eval="'2014-03-14 08:00:00'"/>
            <field name="priority">100</field>
        </record>

    </data>
</openerp>
